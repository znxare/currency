<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X Transfer</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/2.3.2/signature_pad.min.js"></script>
    <style>
        .signature-pad {
            border: 1px solid #000;
            width: 100%;
            height: 200px;
        }
        #animatedRate {
            font-size: 1.5rem;
            text-align: center;
        }
        .receipt-section {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <header class="text-center mb-5">
            <h1>X Transfer</h1>
            <h2>Fast Transfers - Average Transfer Time: 200 Min 24/7</h2>
        </header>
        <section>
            <form id="calculator" class="mb-5">
                <div class="form-group">
                    <label for="amount">Enter how much AED you want to send to India?</label>
                    <input type="number" id="amount" class="form-control" placeholder="Enter amount in AED" required>
                </div>
                <div id="animatedRate">Current Transfer Rate: 21.00</div>
                <button type="submit" class="btn btn-primary btn-block mt-3">Calculate</button>
                <div id="result" class="mt-3"></div>
            </form>
        </section>
        <section class="send-now" style="display:none;">
            <button class="btn btn-success btn-block" id="sendNowBtn">Send Money Now with Special Offer!</button>
        </section>
        <section id="sendMoneySection" style="display:none;">
            <form id="sendMoneyForm" class="mt-5">
                <div class="form-group">
                    <label for="fullName">Full Name:</label>
                    <input type="text" id="fullName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="mobileNo">Mobile No:</label>
                    <input type="text" id="mobileNo" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="signature">Signature:</label>
                    <canvas id="signaturePad" class="signature-pad"></canvas>
                    <button type="button" class="btn btn-danger btn-sm mt-2" id="clearSignature">Clear Signature</button>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Generate Receipt</button>
            </form>
        </section>
        <section id="receiptSection" class="receipt-section mt-5">
            <div id="receiptContent">
                <h3 class="text-center">Receipt</h3>
                <p><strong>Receipt No:</strong> <span id="receiptNo"></span></p>
                <p><strong>Receipt Time:</strong> <span id="receiptTime"></span></p>
                <p><strong>Name:</strong> <span id="receiptName"></span></p>
                <p><strong>Email:</strong> <span id="receiptEmail"></span></p>
                <p><strong>Mobile No:</strong> <span id="receiptMobileNo"></span></p>
                <p><strong>Amount:</strong> <span id="receiptAmount"></span></p>
                <p><strong>Rate:</strong> <span id="receiptRate"></span></p>
                <img id="receiptSignature" src="" alt="Signature" class="mt-3">
                <p><strong>Signed by United Bank Transfer</strong></p>
                <p><strong>Disclaimer:</strong> This is an automatically generated receipt.</p>
            </div>
            <button id="whatsappBtn" class="btn btn-success btn-block mt-3">Click here to receive bank details by our customer service agent</button>
        </section>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const calculator = document.getElementById('calculator');
            const resultElement = document.getElementById('result');
            const animatedRateElement = document.getElementById('animatedRate');
            const sendNowBtn = document.getElementById('sendNowBtn');
            const sendNowSection = document.querySelector('.send-now');
            const sendMoneySection = document.getElementById('sendMoneySection');
            const sendMoneyForm = document.getElementById('sendMoneyForm');
            const receiptSection = document.getElementById('receiptSection');
            const receiptContent = document.getElementById('receiptContent');
            const receiptNo = document.getElementById('receiptNo');
            const receiptTime = document.getElementById('receiptTime');
            const receiptName = document.getElementById('receiptName');
            const receiptEmail = document.getElementById('receiptEmail');
            const receiptMobileNo = document.getElementById('receiptMobileNo');
            const receiptAmount = document.getElementById('receiptAmount');
            const receiptRate = document.getElementById('receiptRate');
            const receiptSignature = document.getElementById('receiptSignature');
            const signaturePad = new SignaturePad(document.getElementById('signaturePad'));

            function animateRate() {
                let rate = 21.00;
                const targetRate = 23.50;
                const increment = 0.10;

                const interval = setInterval(() => {
                    rate += increment;
                    if (rate >= targetRate) {
                        rate = targetRate;
                        clearInterval(interval);
                    }
                    animatedRateElement.textContent = `Current Transfer Rate: ${rate.toFixed(2)}`;
                }, 100);
            }

            calculator.addEventListener('submit', function (e) {
                e.preventDefault();
                const amount = parseFloat(document.getElementById('amount').value);
                let exchangeRate = 23.50;

                if (amount > 2000 && amount <= 2500) {
                    exchangeRate = 23.60;
                    alert('Congratulations! The current rate for amounts over 2000 AED is 23.60 INR');
                } else if (amount > 2500 && amount <= 3000) {
                    exchangeRate = 23.70;
                    alert('Congratulations! The current rate for amounts over 2500 AED is 23.70 INR');
                } else if (amount > 3000) {
                    exchangeRate = 23.80;
                    alert('Congratulations! The current rate for amounts over 3000 AED is 23.80 INR');
                }

                const result = amount * exchangeRate;
                resultElement.textContent = `You will receive ${result.toFixed(2)} INR`;

                sendNowSection.style.display = 'block';
            });

            sendNowBtn.addEventListener('click', function () {
                sendMoneySection.style.display = 'block';
                sendNowSection.scrollIntoView({ behavior: 'smooth' });
            });

            sendMoneyForm.addEventListener('submit', function (e) {
                e.preventDefault();
                const fullName = document.getElementById('fullName').value;
                const email = document.getElementById('email').value;
                const mobileNo = document.getElementById('mobileNo').value;
                const amount = document.getElementById('amount').value;
                const exchangeRate = parseFloat(animatedRateElement.textContent.match(/\d+\.\d+/)[0]);
                const currentDateTime = new Date().toLocaleString();
                const receiptNumber = `UBT${Math.floor(Math.random() * 1000000)}`;

                receiptNo.textContent = receiptNumber;
                receiptTime.textContent = currentDateTime;
                receiptName.textContent = fullName;
                receiptEmail.textContent = email;
                receiptMobileNo.textContent = mobileNo;
                receiptAmount.textContent = `${amount} AED`;
                receiptRate.textContent = `${exchangeRate.toFixed(2)} INR to AED`;

                const signatureDataUrl = signaturePad.toDataURL();
                receiptSignature.src = signatureDataUrl;

                receiptSection.style.display = 'block';
                receiptSection.scrollIntoView({ behavior: 'smooth' });
            });

            document.getElementById('clearSignature').addEventListener('click', function () {
                signaturePad.clear();
            });

            document.getElementById('whatsappBtn').addEventListener('click', function () {
                html2canvas(receiptContent).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const message = encodeURIComponent(`Hey, I want to send money to India. Here is my receipt. Kindly share the bank details.\n\n${imgData}`);
                    const whatsappUrl = `https://wa.me/?text=${message}`;
                    window.open(whatsappUrl, '_blank');
                });
            });

            animateRate();
        });
    </script>
</body>
</html>
